(()=>{"use strict";var e={352:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setUsers=t.getUsers=t.users=void 0,t.users=[],t.getUsers=function(){return t.users},t.setUsers=function(e){t.users=e}},740:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.server=void 0;const o=s(r(136)),a=s(r(520)),d=r(104),p=r(352),c=s(r(716));a.config();const u=process.env.PORT;t.server=o.createServer(((e,t)=>{try{const r=(0,p.getUsers)();if("GET"===e.method&&"/users"===e.url)t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify(r));else if("POST"===e.method&&"/users"===e.url){let n="";e.on("data",(e=>{try{n+=e.toString()}catch(e){throw new Error}})),e.on("end",(()=>{try{const{username:e,age:i,hobbies:s}=JSON.parse(n);if(!e||!i||!s)throw new Error;const o={id:(0,d.v4)(),username:e,age:i,hobbies:s};r.push(o),t.writeHead(201,{"Content-Type":"application/json"}),t.end(JSON.stringify(o))}catch{throw new Error}}))}else if("GET"===e.method&&e.url?.startsWith("/users/")){const n=c.parse(e.url,!0).pathname.split("/")[2],i=r.find((e=>e.id===n));(0,d.validate)(n)?i?(t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify(i))):(t.writeHead(404,{"Content-Type":"application/json"}),t.end(JSON.stringify({msg:"404 Not Found"}))):(t.writeHead(400,{"Content-Type":"application/json"}),t.end(JSON.stringify({msg:"Inccorect user id"})))}else if("PUT"===e.method&&e.url?.startsWith("/users/")){const n=c.parse(e.url,!0).pathname.split("/")[2];let i="";e.on("data",(e=>{try{i+=e.toString()}catch(e){throw new Error}})),e.on("end",(()=>{try{const e=JSON.parse(i),s=r.find((e=>e.id===n));if((0,d.validate)(n))if(s){const i={...s,...e},o=[...r.filter((e=>e.id!==n)),i];(0,p.setUsers)(o),t.writeHead(201,{"Content-Type":"application/json"}),t.end(JSON.stringify(i))}else t.writeHead(404,{"Content-Type":"application/json"}),t.end(JSON.stringify({msg:"404 Not Found"}));else t.writeHead(400,{"Content-Type":"application/json"}),t.end(JSON.stringify({msg:"Inccorect user id"}))}catch{throw new Error}}))}else if("DELETE"===e.method&&e.url?.startsWith("/users/")){const r=c.parse(e.url,!0).pathname.split("/")[2],n=(0,p.getUsers)().find((e=>e.id===r)),i=(0,p.getUsers)().filter((e=>e.id!==r));(0,d.validate)(r)?n?((0,p.setUsers)(i),t.writeHead(204,{"Content-Type":"application/json"}),t.end(JSON.stringify(n))):(t.writeHead(404,{"Content-Type":"application/json"}),t.end(JSON.stringify({msg:"404 Not Found"}))):(t.writeHead(400,{"Content-Type":"application/json"}),t.end(JSON.stringify({msg:"Inccorect user id"})))}else t.writeHead(404,{"Content-Type":"application/json"}),t.end(JSON.stringify({msg:"404 Not Found"}))}catch{t.writeHead(500,{"Content-Type":"application/json"}),t.end(JSON.stringify({msg:"server side error"}))}})),t.server.listen(u,(()=>{console.log(`Server is running on port ${u}`)}))},520:e=>{e.exports=require("dotenv")},104:e=>{e.exports=require("uuid")},136:e=>{e.exports=require("http")},716:e=>{e.exports=require("url")}},t={};!function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(740)})();